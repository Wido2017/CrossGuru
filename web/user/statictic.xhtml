<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<!--记录查询与分析-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <link rel="stylesheet" href="../resources/css/lightChange.css" />
    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>记录查询</title>
            </f:facet>
        </h:head>

        <h:body style="background-color: #dfecf1">
            <div style="height:70px;margin-top: 0px;margin-left:0px;margin-right:0px;background-color: #dfecf1">
                <p:button style="margin-left:10px;margin-top:20px" id="fanhui" icon="fa fa-reply" value="返回" onclick="javascript:history.go(-1)" href="../home.xhtml"/>   
                <h:outputText style="margin-left: 500px;margin-top:10px;" id="title" class="ui-title" value="以往车流量分析"></h:outputText>           
            </div>
            <div style="margin-left: -10px;margin-right:-8px;background-color: #6a85b6"><h:outputLabel style="margin-left:1090px" value="当前位置：" ><a class="atext4" href="../home.xhtml">首页</a>->记录查询</h:outputLabel></div>
            <div style="margin-top:0px;margin-left:0px;margin-right:0px">
                <h:form>
                    <p:growl id="growl" showDetail="true" />
                    <h:panelGrid style="margin-top:100px" id="title" columns="5" cellpadding="20" class="ui-setGrid">
                        <h:outputLabel style="margin-left: -100px;" class="ui-setLabel" for="danwei" value="请选择时段单位:" />
                        <p:selectOneMenu id="danwei" value="#{selectManager.selectDanwei}" style="width:125px" effect="fold">
                            <f:selectItem itemLabel="天" itemValue="天"/>
                            <f:selectItem itemLabel="小时" itemValue="小时"/>
                            <f:selectItem itemLabel="分钟" itemValue="分钟"/>
                            <p:ajax event="itemSelect" listener="#{selectManager.Danwei}" update="lineChart barChart" />
                        </p:selectOneMenu>
                        <h:outputLabel style="margin-left: 100px;" class="ui-setLabel" for="riqi" value="选择日期:"/>
                        <p:calendar id="riqi" value="#{selectManager.selectDate}" showOn="button" effect="fold" maxdate="#{selectManager.currentDate}">
                            <p:ajax  event="dateSelect" listener="#{selectManager.Date}" update="lineChart barChart" />
                            <p:ajax  event="change" listener="#{selectManager.Date}" update="lineChart barChart" />
                        </p:calendar>
                    </h:panelGrid>
                    <h:panelGroup  id="lineChart" class="ui-setGroup1" style="margin-left:2%;;margin-top:4% ">
                        <h:panelGrid columns="2" cellpadding="5">
                            <img src="../resources/images/clock.png" class="ui-setimg"/> 
                            <h:outputText class="ui-setLabel" value="时刻:"/>                       
                        </h:panelGrid>
                        <p:selectOneMenu id="shiduan" value="#{shiduanManager.selectHour}" rendered="#{shiduanManager.minute}" effect="fold">
                            <f:selectItems value="#{shiduanManager.hours}"/>
                            <p:ajax event="itemSelect" listener="#{shiduanManager.selectHourEvent}" update="lineChart" />
                        </p:selectOneMenu>
                        <p:chart  type="line" model="#{lineChartView.lineModel}" style="height:450px;width: 650px;" responsive="true"/>
                    </h:panelGroup>
                    <h:panelGroup id="barChart" class="ui-setGroup2" style="margin-left:50%;;margin-top:4%">
                        <h:panelGrid columns="2" cellpadding="5">
                            <img src="../resources/images/location.png" class="ui-setimg"/>
                            <h:outputText class="ui-setLabel" value="路段:"/>
                        </h:panelGrid>
                        <p:chart type="bar" model="#{barChartView.barModel}" style="height:450px;width: 650px;" responsive="true">
                            <p:ajax event="itemSelect" listener="#{barChartView.itemSelect}" update="growl lineChart" />
                        </p:chart>
                    </h:panelGroup>
                </h:form>
            </div>
        </h:body>

    </f:view>
</html>

